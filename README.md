# Среда исполнения IEC 61131

Среда исполнения, получающая команды из 4diac и исполняющая их, реализованная на Python. Реализованы следующие
функциональные блоки:

* Арифметические функции iec61131-3/arithmetic: `ADD_2`, `ADD_3`, `ADD_4`, `F_SUB`, `F_MUL`, `F_DIV`
* Функции сравнения iec61131-3/comparison: `F_EQ`, `F_GE`, `F_GT`, `F_LE`, `F_LT`, `F_NE`
* Функции выбора iec61131-3/selection: `F_MAX`, `F_MIN`
* Функции конвертации: `BOOL2BOOL`, `INT2INT`, `STRING2STRING`
* События: `E_CYCLE`, `E_DELAY`, `E_RESTART`
* Utils: `OUT_ANY_CONSOLE`, `TEST_CONDITION`

Реализация основана на asyncio и запускает выполнение каждого функционального блока параллельно, из-за чего не
гарантируется постоянность порядка выполнения. Тем не менее, для передачи значений синхронизация реализована таким
образом, что запуск функционального блока происходит только после получения значения для соединения. 

## Запуск

1. Клонировать репозиторий
2. Установить зависимости с помощью `pip install -r requirements.txt`
3. Создать venv: `virtualenv .venv`
4. Активировать venv
5. Настроить переменные окружения (см. ниже)
6. Запустить `main.py`

## Переменные окружения

| Переменная  | Описание                                  | Пример    |
|-------------|-------------------------------------------|-----------|
| `BIND_ADDR` | Адрес TCP сервера                         | `0.0.0.0` |
| `BIND_PORT` | Порт TCP сервера                          | `61499`   |
| `MAX_CONNS` | Максимальное кол-во подключений к серверу | `50`      |
